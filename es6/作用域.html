<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // ES5 中作用域分为全局作用域和局部作用域  没有块级作用域 
        // 因此用很多缺陷
        // 1内层变量可能会覆盖外层变量  变量污染
        //  例子   // var str ='wang';
        // function foo(){
        //     console.log(str)
        //     if(false){
        //         var str = 'dkfjsd';
        //     }
        // }
        // foo()//undefined
        //2 用来计数的循环变量泄露为全局变量
        // 例子 for循环中的计数 外部打印这个变量就会发现；



        // ES6 的块级作用域
        // 1不会造成变量污染
        //  例子   // let n = 2;
        // function f1(){
        // return n+2;
        // }
        // console.log(f1())//4
        // console.log(n)//2
        // 2允许块级作用域的任意嵌套 外层作用域无法读取内层作用域
        // 内层作用域可以定义外层作用域相同的名的变量

        // 3 使立即执行函数表达式不在必要 
        // 例子  //// IIFE 写法
        //     (function () {
        //         var tmp = 45;
        //     }());

        // // 块级作用域写法
        // {
        //     let tmp = 54;

        // }



        // 块级作用域 与函数声明
        // ES5中规定  函数只能在顶层作用域和函数作用域中声明 不能在块级作用域中声明
        // ES6中 引入作用域 明确允许在块级作用域之中声明函数 在块级作用域 之外不可以引用
                // function f() { console.log('I am outside!'); }

                // (function () {
                //     if (false) {
                //         // 重复声明一次函数f
                //         function f() { console.log('I am inside!'); }
                //     }

                //     f();//报错 ES5 中运行，会得到“I am inside!”，因为在if内声明的函数f会被提升到函数头部，
                            // es6 理论上会得到“I am outside!”，类似于在块级作用域中let声明  但在 ES6 浏览器中运行一下上面的代码，是会报错的
                            // 如果改变了块级作用域内声明的函数的处理规则，显然会对老代码产生很大影响。为了减轻因此产生的不兼容问题，ES6 在附录 B里面规定，浏览器的实现可以不遵守上面的规定，有自己的行为方式。

                            // 允许在块级作用域内声明函数
                            // 函数声明类似var 
                            //  函数声明还会提升所在块级作用域的头部

                            //注意，上面三条规则只对 ES6 的浏览器实现有效，其他环境的实现不用遵守，还是将块级作用域的函数声明当作let处理。
                            // 根据这三条规则，在浏览器的 ES6 环境中，块级作用域内声明的函数，行为类似于var声明的变量

                            // 考虑到环境导致的行为差异太大，应该避免在块级作用域内声明函数。如果确实需要，也应该写成函数表达式，而不是函数声明语句。
                // }());

    </script>
</body>

</html>