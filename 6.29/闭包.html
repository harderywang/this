<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>闭包</title>
</head>
<body>
    
</body>
<script>
    // 什么是闭包？优点是什么？
    // 优点：1.函数return返回函数，外部函数可以访问内部函数的变量
    // 2.变量不会被污染，彼此之间相互独立，互不干扰
    // 缺点：变量不能释放导致内存泄漏
    function foo(){
        var num = 0;
        return function(){
            num++;
            console.log('这就是闭包',num);
        }
    }
    var bar = foo();
    console.log(bar);
    bar();
    console.log(bar);
    var bar1 = foo();
    bar1();
    var bar2 = foo();
    console.log(bar2);
    bar2();
    /* foo()函数执行一次形成一个闭包，闭包与闭包之间彼此独立互不干扰 因为foo()每次执行会初始化一个AO对象，AO对象之间的地址不同，对象之间是相邻的关系。bar bar1 bar2操作的是各自的AO 不是同一个AO
    */
    // bar 是foo()函数的返回值  如果函数没有return返回值，那么bar就是undefined
    
    var bar = function(){
        console.log('这是闭包',num);
    }
    // bar实际上接收的是子作用域函数的指针，并不是真正意义上的一个外部访问内部
    
    // 函数中有函数 并且return返回的是一个子函数，子函数里访问外层函数的变量
    var a = {};
    var b = {n:1};
    var c = {m:2};
    a[b] = 3;
    a[c] = 4;
    console.log(a);//{[object Object]: 4}
    console.log(a[b]);//4
    console.log(a[c]);//4
</script>
</html>